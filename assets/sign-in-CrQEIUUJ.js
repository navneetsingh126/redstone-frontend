import{j as e,B as d,ae as C,e as c,ac as P,af as L,r as i,ag as k,o as f,a7 as D,q as o,I as l,n as F,D as A,V as W}from"./index-BGzCyL09.js";import{T as y}from"./TextField-CvY74_4W.js";import"./Select-Bbj5hnnA.js";function B({message:r="Loading...",fullScreen:a=!0}){return e.jsxs(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2,...a&&{height:"100vh",width:"100vw"}},children:[e.jsx(C,{size:40}),e.jsx(c,{variant:"body2",color:"text.secondary",children:r})]})}function T(){const r=P(),{login:a,isAuthenticated:h,isInitialized:b}=L(),[u,w]=i.useState(!1),[s,g]=i.useState({username:"",password:""}),[p,x]=i.useState(null),[m,j]=i.useState(!1),v=i.useCallback(async()=>{var n,t;if(!s.username||!s.password){x("Please enter both username and password");return}try{j(!0),x(null),await a(s),r.push("/")}catch(I){x(((t=(n=I.response)==null?void 0:n.data)==null?void 0:t.detail)||"Login failed. Please try again.")}finally{j(!1)}},[s,a,r]);if(!b)return e.jsx(B,{message:"Checking authentication..."});if(h)return r.push("/"),null;const S=e.jsxs(d,{sx:{display:"flex",alignItems:"flex-end",flexDirection:"column"},children:[p&&e.jsx(k,{severity:"error",sx:{mb:3,width:"100%"},children:p}),e.jsx(y,{fullWidth:!0,name:"username",label:"Username",value:s.username,onChange:n=>g(t=>({...t,username:n.target.value})),sx:{mb:3},slotProps:{inputLabel:{shrink:!0}}}),e.jsx(f,{variant:"body2",color:"inherit",sx:{mb:1.5},children:"Forgot password?"}),e.jsx(y,{fullWidth:!0,name:"password",label:"Password",type:u?"text":"password",value:s.password,onChange:n=>g(t=>({...t,password:n.target.value})),slotProps:{inputLabel:{shrink:!0},input:{endAdornment:e.jsx(D,{position:"end",children:e.jsx(o,{onClick:()=>w(!u),edge:"end",children:e.jsx(l,{icon:u?"solar:eye-bold":"solar:eye-closed-bold"})})})}},sx:{mb:3}}),e.jsx(F,{fullWidth:!0,size:"large",type:"submit",color:"inherit",variant:"contained",onClick:v,disabled:m,children:m?"Signing in...":"Sign in"})]});return e.jsxs(e.Fragment,{children:[e.jsxs(d,{sx:{gap:1.5,display:"flex",flexDirection:"column",alignItems:"center",mb:5},children:[e.jsx(c,{variant:"h5",children:"Sign in"}),e.jsxs(c,{variant:"body2",sx:{color:"text.secondary"},children:["Donâ€™t have an account?",e.jsx(f,{variant:"subtitle2",sx:{ml:.5},children:"Get started"})]})]}),S,e.jsx(A,{sx:{my:3,"&::before, &::after":{borderTopStyle:"dashed"}},children:e.jsx(c,{variant:"overline",sx:{color:"text.secondary",fontWeight:"fontWeightMedium"},children:"OR"})}),e.jsxs(d,{sx:{gap:1,display:"flex",justifyContent:"center"},children:[e.jsx(o,{color:"inherit",children:e.jsx(l,{width:22,icon:"socials:google"})}),e.jsx(o,{color:"inherit",children:e.jsx(l,{width:22,icon:"socials:github"})}),e.jsx(o,{color:"inherit",children:e.jsx(l,{width:22,icon:"socials:twitter"})})]})]})}function G(){return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`Sign in - ${W.appName}`}),e.jsx(T,{})]})}export{G as default};
